# Starling Bank Round-Up Service

Приложение для автоматизации накоплений, интегрированное с **Starling Bank API (Sandbox)**. Проект анализирует транзакции пользователя и рассчитывает сумму «сдачи» для последующего перевода в накопительную корзину.

---

## Основные возможности

* **Интеграция с REST API**: Полноценная работа с банковскими эндпоинтами для получения счетов и истории транзакций.
* **Автоматизация накоплений**: Расчет суммы округления (Round-Up) для всех исходящих транзакций за указанный период.
* **Безопасность**: Реализация авторизации через Bearer-токен и кастомные HTTP-заголовки.
* **Надежность**: Строгая фильтрация транзакций по статусу `SETTLED` и направлению `OUT`.

---

## Архитектурные решения

Проект реализован с четким разделением ответственности (Separation of Concerns):

1. **Networking Layer**
Использование `URLComponents` и перечислений `StarlingEndpoint` для безопасного формирования запросов и управления путями API.
2. **Data Layer**
Модели данных используют протокол `Decodable` для автоматического маппинга JSON-ответов.
3. **Business Logic**
Вынос математических расчетов в изолированный сервис `RoundUpService`, что упрощает тестирование и поддержку.
4. **Modern Concurrency**
Применение Swift `async/await` для написания чистого и безопасного асинхронного кода без использования callback-функций.

---

## Логика расчета (Round-Up)

Алгоритм работает по принципу накопления остатка до ближайшего целого фунта:

> **Пример**: Транзакция на сумму £1.20 генерирует «сдачу» в 80p. Транзакция на £10.00 генерирует 0p.

* Программа вычисляет остаток в пенсах от каждой транзакции (`minorUnits % 100`).
* Если остаток больше нуля, вычисляется разница до следующего целого числа (`100 - остаток`).
* Транзакции с нулевым остатком (ровные суммы) игнорируются.

---

## Тестирование

Проект включает в себя **Unit-тесты** на фреймворке `XCTest`, которые покрывают ключевую финансовую логику:

* **Accuracy**: Валидация расчета сдачи для различных сумм.
* **Edge Cases**: Проверка корректной обработки транзакций без остатка (целые фунты).
* **Filtering**: Гарантия того, что логика не учитывает входящие переводы и незавершенные операции.

---

## Системные требования

* **Xcode**: 15.0+
* **Swift**: 5.9+
* **iOS**: 15.0+

---

## Инструкция по запуску

1. Склонируйте репозиторий на локальную машину.
2. Получите персональный токен доступа в консоли разработчика **Starling Bank**.
3. Вставьте полученный токен в файл `CustomerDetails.swift` в поле `accessToken`.
4. Запустите тесты нажатием **Cmd + U**, чтобы убедиться в корректности работы алгоритмов.
5. Нажмите **Cmd + R** для запуска приложения на симуляторе или реальном устройстве.
